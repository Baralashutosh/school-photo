<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Photo Download Portal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px;
      background: #f5f5f5;
    }
    input {
      padding: 10px;
      font-size: 16px;
      width: 200px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-left: 10px;
    }
    #result {
      margin-top: 30px;
    }
    iframe {
      border: none;
    }
  </style>
</head>
<body>
  <h2>üéâ Download Your Photo</h2>
  <p>Enter your 4-digit passcode:</p>
  <input type="text" id="passcode" placeholder="e.g., 4827">
  <button onclick="checkPasscode()">Submit</button>
  <div id="result"></div>

  <script>
    function checkPasscode() {
      const userInput = document.getElementById("passcode").value.trim();
      if (userInput === "") {
        document.getElementById("result").innerHTML = "‚ö†Ô∏è Please enter a passcode.";
        return;
      }

      fetch("passcodes.json")
        .then(response => {
          if (!response.ok) {
            throw new Error("Failed to load passcodes.json");
          }
          return response.json();
        })
        .then(data => {
          if (data[userInput]) {
            const photoLink = data[userInput];
            document.getElementById("result").innerHTML = `
              ‚úÖ <b>Photo Found!</b><br><br>
              <iframe src="${photoLink.replace('/view?usp=drivesdk', '/preview')}" width="320" height="240"></iframe><br><br>
              <a href="${photoLink}" target="_blank">
                <button>üì• Download Photo</button>
              </a>
            `;
          } else {
            document.getElementById("result").innerHTML = "‚ùå Invalid passcode. Try again.";
          }
        })
        .catch(error => {
          console.error(error);
          document.getElementById("result").innerHTML = "‚ö†Ô∏è Error loading data.";
        });
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Retrieve Your Photo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>üéì School Photo Portal</h1>
  <p>Enter your unique passcode:</p>
  <input type="text" id="passcode" maxlength="6" />
  <button onclick="findPhoto()">View Photo</button>
  <div id="error"></div>
  <div id="photo-container"></div>

  <script>
    let passcodes = {};

    fetch('passcodes.json')
      .then(response => response.json())
      .then(data => { passcodes = data; })
      .catch(() => {
        document.getElementById('error').innerText = "Failed to load passcode data.";
      });

    function findPhoto() {
      const code = document.getElementById('passcode').value.trim();
      const container = document.getElementById('photo-container');
      const error = document.getElementById('error');
      container.innerHTML = "";
      error.innerText = "";

      if (!passcodes[code]) {
        error.innerText = "Invalid passcode. Try again.";
        return;
      }

      const url = passcodes[code];
      const img = document.createElement('img');
      img.src = url;

      const download = document.createElement('a');
      download.href = url;
      download.innerText = "‚¨áÔ∏è Download Photo";
      download.download = "photo.jpg";
      download.style.display = "block";
      download.style.marginTop = "10px";

      container.appendChild(img);
      container.appendChild(download);
    }
  </script>
</body>
</html>
